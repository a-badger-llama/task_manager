<div id="<%= dom_id(task) %>" class="flex p-1 hover:bg-neutral-800 drag-handle focus:outline-none" draggable="true" tabindex="0" data-id="<%= task.id %>" data-controller="task" data-action="focusout->task#focusOut focusin->task#focusIn" data-task-list-target="task">
  <div class="flex items-center cursor-grab drag-handle opacity-0" draggable="true" data-task-target="dragHandle">
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" class="text-gray-400" xmlns="http://www.w3.org/2000/svg">
      <circle cx="6"  cy="7"  r="1" fill="currentColor"/>
      <circle cx="12" cy="7"  r="1" fill="currentColor"/>
      <circle cx="6"  cy="12" r="1" fill="currentColor"/>
      <circle cx="12" cy="12" r="1" fill="currentColor"/>
      <circle cx="6"  cy="17" r="1" fill="currentColor"/>
      <circle cx="12" cy="17" r="1" fill="currentColor"/>
    </svg>
  </div>

  <%= render "form", task: task %>

  <% if task.persisted? %>
    <div class="relative flex items-center" data-controller="dropdown">
      <span class="px-2 py-1 cursor-pointer rounded-lg hover:bg-gray-900" data-action="click->dropdown#toggle click@window->dropdown#hide">
        &#x22EE; <!-- Three vertical dots -->
      </span>

      <div class="hidden flex flex-col absolute right-0 top-10 z-10 rounded-lg py-2 bg-gray-700 border border-gray-700"
           data-dropdown-target="menu"
           data-transition-enter="transition ease-out duration-200"
           data-transition-enter-from="opacity-0 translate-y-1"
           data-transition-enter-to="opacity-100 translate-y-0"
           data-transition-leave="transition ease-in duration-150"
           data-transition-leave-from="opacity-100 translate-y-0"
           data-transition-leave-to="opacity-0 translate-y-1">
        <span class="cursor-pointer px-8 py-2 text-white hover:bg-neutral-800" data-action="click->task#deleteTask">Delete</span>
      </div>
    </div>
  <% end %>
</div>
